Import('env')
Import('rtconfig')
Import('RTT_ROOT')
Import('projects')

src_local = Split("""
src/api/api_lib.c
src/api/api_msg.c
src/api/err.c
src/api/netbuf.c
src/api/netdb.c
src/api/netifapi.c
src/api/sockets.c
src/api/tcpip.c
src/arch/sys_arch.c
src/arch/sys_arch_init.c
src/core/dhcp.c
src/core/dns.c
src/core/init.c
src/core/memp.c
src/core/netif.c
src/core/pbuf.c
src/core/raw.c
src/core/stats.c
src/core/sys.c
src/core/tcp.c
src/core/tcp_in.c
src/core/tcp_out.c
src/core/udp.c
src/core/ipv4/autoip.c
src/core/ipv4/icmp.c
src/core/ipv4/igmp.c
src/core/ipv4/inet.c
src/core/ipv4/inet_chksum.c
src/core/ipv4/ip.c
src/core/ipv4/ip_addr.c
src/core/ipv4/ip_frag.c
src/core/snmp/asn1_dec.c
src/core/snmp/asn1_enc.c
src/core/snmp/mib2.c
src/core/snmp/mib_structs.c
src/core/snmp/msg_in.c
src/core/snmp/msg_out.c
src/netif/etharp.c
src/netif/ethernetif.c
src/netif/loopif.c
src/netif/slipif.c
src/netif/ppp/auth.c
src/netif/ppp/chap.c
src/netif/ppp/chpms.c
src/netif/ppp/fsm.c
src/netif/ppp/ipcp.c
src/netif/ppp/lcp.c
src/netif/ppp/magic.c
src/netif/ppp/md5.c
src/netif/ppp/pap.c
src/netif/ppp/ppp.c
src/netif/ppp/ppp_oe.c
src/netif/ppp/randm.c
src/netif/ppp/vj.c
""")

for index in range(0, len(src_local)):
	src_local[index] = RTT_ROOT + '/rt-thread/components/net/lwip/' + src_local[index]

# The set of source files associated with this SConscript file.
path = [RTT_ROOT + '/rt-thread/components/net/lwip/src', 
    RTT_ROOT + '/rt-thread/components/net/lwip/src/include', 
    RTT_ROOT + '/rt-thread/components/net/lwip/src/include/ipv4', 
    RTT_ROOT + '/rt-thread/components/net/lwip/src/arch/include', 
    RTT_ROOT + '/rt-thread/components/net/lwip/src/include/netif', 
    RTT_ROOT + '/rt-thread/components/net/lwip/src/netif/ppp']

# group definitions
group = {}
group['name'] = 'LwIP'
group['src'] = File(src_local)
group['CCFLAGS'] = ''
group['CPPPATH'] = path
group['CPPDEFINES'] = ''
group['LINKFLAGS'] = ''

# add group to project list
projects.append(group)

env.Append(CCFLAGS = group['CCFLAGS'])
env.Append(CPPPATH = group['CPPPATH'])
env.Append(CPPDEFINES = group['CPPDEFINES'])
env.Append(LINKFLAGS = group['LINKFLAGS'])

obj = env.Object(group['src'])

Return('obj')
